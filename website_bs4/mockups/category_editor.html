<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>MYCMS Demo Website</title>

    <!-- Bootstrap core CSS -->
    <link href="/static/mycms/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome css-->
    <link href="/static/mycms/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  
    <!-- Custom styles for this template -->

    <link type="text/css" rel="stylesheet" href="/static/mycms/file-upload/css/jquery.fileupload.css">
    <link type="text/css" rel="stylesheet" href="/static/mycms/file-upload/css/jquery.fileupload-ui.css">
    <link type="text/css" rel="stylesheet" href="/static/mycms/file-upload/css/jquery-ui.css">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" crossorigin="anonymous">
    <link href="/static/mycms/vendor/fileinput/css/fileinput.css" media="all" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" crossorigin="anonymous">
    <link href="/static/mycms/vendor/fileinput/themes/explorer-fas/theme.css" media="all" rel="stylesheet" type="text/css"/>
    
    <link href="/static/mycms/css/custom.css" rel="stylesheet">
    <link href="/static/mycms/css/editors.css" rel="stylesheet">



 
  <style>
    body {
      padding-top: 56px;
      background-color: #1E3562;
    }
  
    textarea {
        width:100%;
    }
    
    
    #overlay {
    position: fixed;
   // display: none;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    //background-color: rgba(0,0,0,0.5);
    cursor: pointer;
    overflow-y: scroll;
    z-index: 2050;
    margin-top: 10px;
}
  
  </style>
  
  
  <script> view_json = 1;</script>
</head>

<body style="background-color:#1E3562; padding-top:56px;">


<div id="overlay" style="display:block;">
  
  <div class="row-fluid" id="admin-pane">
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="creole-editor-tab" data-toggle="tab" 
          href="#creole-editor-pane" role="tab" aria-controls="creole-editor" 
          aria-selected="true">Page Markup
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" 
          role="tab" aria-controls="profile" aria-selected="false">Page Assets
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="contact-tab" data-toggle="tab" href="#cmsentries-editor-pane" role="tab" aria-controls="contact" aria-selected="false">Child Pages</a>
      </li>
    </ul>
    
    <div class="tab-content" id="admin-tabs-container">
      
      <div class="tab-pane fade show active" id="creole-editor-pane" role="tabpanel" aria-labelledby="creole-editor-tab">
        <!--Editor Code-->
        <div id="creole-editor-icons">
          <ul class="nav">
              <li class="nav-item"><button type="button" class="editor-icon btn btn-dark btn-sm"><span class="fa fa-header">1</span></button></li>
              <li class="nav-item"><button type="button" class="editor-icon btn btn-dark btn-sm"><span class="fa fa-header">2</span></button></li>
              <li class="nav-item"><button type="button" class="editor-icon btn btn-dark btn-sm"><span class="fa fa-header">3</span></button></li>
              <li class="nav-item"><button type="button" class="editor-icon btn btn-dark btn-sm"><span class="fa fa-header">4</span></button></li>
              <li class="nav-item"><button type="button" class="editor-icon btn btn-dark btn-sm"><span class="fa fa-list"></span></button></li>
              <li class="nav-item"><button type="button" class="editor-icon btn btn-dark btn-sm"><span class="fa fa-bold"></span></button></li>
              <li class="nav-item"><button type="button" class="editor-icon btn btn-dark btn-sm"><span class="fa fa-floppy-o "></button></li>
              <li class="nav-item">
                <button type="button" class="editor-icon-checkbox editor-icon btn btn-dark btn-sm">
                  <label class="icon-label"><input type="checkbox" value id="published_checkbox">Published</label>
                </button>
              </li>
              <li class="nav-item">
                <button type="button" class="editor-icon-checkbox editor-icon btn btn-dark btn-sm">
                  <label class="icon-label"><input type="checkbox" value id="published_checkbox">FrontPage</label>
                </button>
              </li>
          </ul>
        <!--End Editor Code-->
        </div>
        <div class="my-editor" id="editor-container">
            <textarea data-gramm_editor="false" placeholder="When text overflows it automatically changes its height and width."></textarea>
        </div>
      </div>
      <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
      <!--File Upload Code-->
        <div id="fileupload-container">
          
          <form enctype="multipart/form-data">
              <div class="file-loading">
                  <input id="kv-explorer" type="file" multiple>
              </div>
              <br>
          </form>
        <!--End File Upload Code-->
        </div>
      </div>        
     
     
      <div class="tab-pane fade" id="cmsentries-editor-pane" role="tabpanel" aria-labelledby="contact-tab">
        <!--Category Editor-->
        
        
        <div id="cmsentries-admin-container" class="xcontainer">
      
          <div class="cmsentries-admin-row row">
          
            <div class="col-sm-4 pad-sm">
              <input id="createpage_title" type="text" placeholder="title" class="form-control">
            </div>
            <div class="col-sm-4 pad-sm">
              <input id="createpage_slug" type="text" placeholder="slug" class="form-control">
            </div>
            <div class="col-sm-3 pad-sm">
              <select id="createpage_pagetype_select" name="createpage_pagetype_select"
                          type="text" class="form-control">
                              <option value="1">Single Page HTML Update</option>
                              <option value="2">Category Page</option>
                              <option value="3">MultPage Article</option>
                              <option value="4">MemberPage Article</option>
              </select>
            </div>
            <div class="col-sm-1 pad-sm">
              <button class="btn btn-primary float-right" type="button" id="create-cms-entry-button">Create</button>

            </div>
          </div>
              
          <div class="cmsentries-admin-row row" id="cmsentries-table-row">
            <div class="pad-sm col">
                  <table class="table table-striped table-hover" id="CMSEntriesTable">
                      <thead>
                          <tr>
                              <th  scope="col">#</th>
                              <th  scope="col">Title</th>
                              <th  scope="col">PageType</th>
                              <th  scope="col">Published</th>
                              <th  scope="col">Front Page</th>
                              <th  scope="col">Date Created</th>
                          </tr>
                      </thead>
                      <tbody>
                        <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      <tr><td>1</td></tr>
                      
                      
                      </tbody>
                  </table>
          </div>  
        </div>
</div>  
      
        <!--Category Editor-->
      </div>
    </div>
  </div>

</div><!-- end overlay-->


    <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="/static/mycms/vendor/fileinput/js/plugins/sortable.js" type="text/javascript"></script>
    <script src="/static/mycms/vendor/fileinput/js/fileinput.js" type="text/javascript"></script>
    <script src="/static/mycms/vendor/fileinput/js/locales/fr.js" type="text/javascript"></script>
    <script src="/static/mycms/vendor/fileinput/js/locales/es.js" type="text/javascript"></script>
    <script src="/static/mycms/vendor/fileinput/themes/fas/theme.js" type="text/javascript"></script>
    <script src="/static/mycms/vendor/fileinput/js/plugins/piexif.js" type="text/javascript"></script>
    <script src="/static/mycms/vendor/fileinput/themes/explorer-fas/theme.js" type="text/javascript"></script>
 
  
  <script type="text/javascript" src="/static/mycms/js/admin.js"></script>
  <script type="text/javascript" src="/static/mycms/dustjs/dust-full.js"></script>
  <script type="text/javascript" src="/static/mycms/templates.js"></script>
    


<script>
$(document).ready(function () {


      
    url = "/cms/mockups/category_editor.html/assets_manager/"
    
    $.ajax({
        url: url,
        type: 'GET',
        error: function(){
            console.log("Failed to get cmscontent object");
        },
        success: function(data){
            content = data["categories"];
            console.log("DATA ", data);
            
            initialPreviewConfigData = data["initialPreviewConfig"];
            initialPreviewData = data["initialPreview"];
            
            update_file_uploader(initialPreviewData, initialPreviewConfigData);
            
           
        }

  });

  function update_file_uploader(initialPreviewData, initialPreviewConfigData){
      
      console.log("initialPreview", initialPreviewData);
      
        $("#kv-explorer").fileinput({
            'theme': 'explorer-fas',
            'uploadUrl': 'category_editor.html/assets_manager/',
            overwriteInitial: false,
            initialPreviewAsData: true,
            initialPreview: initialPreviewData,
            initialPreviewConfig: initialPreviewConfigData
        });
      }
        /*
         $("#test-upload").on('fileloaded', function(event, file, previewId, index) {
         alert('i = ' + index + ', id = ' + previewId + ', file = ' + file.name);
         });
         */
});
    
  
</script>
</body>
</html>